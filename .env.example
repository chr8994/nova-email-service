# Worker Type Configuration (Docker deployment)
# Set WORKER_TYPE to run a specific worker, or leave unset/set to 'all' for monolithic mode
# Options: webhooks, backfill, threads, completion, extraction-queue, extraction, all
# WORKER_TYPE=all

# Supabase Configuration
SUPABASE_URL=your-supabase-url
SUPABASE_SERVICE_KEY=your-service-key

# Nylas Configuration
NYLAS_API_KEY=your-nylas-api-key
NYLAS_API_URI=https://api.us.nylas.com

# Queue Configuration
POLL_INTERVAL_MS=5000
BATCH_SIZE=10
VISIBILITY_TIMEOUT=300

# Completion Monitor Configuration
# How often to check for backfill completion (default: 5000ms = 5 seconds)
COMPLETION_CHECK_INTERVAL_MS=5000

# Auto-recovery for premature completions (default: true)
# Set to 'false' to disable automatic detection and recovery of prematurely completed backfills
ENABLE_AUTO_RECOVERY=true

# How often to scan for premature completions (default: 60000ms = 1 minute)
RECOVERY_CHECK_INTERVAL_MS=60000

# Processing Speed Configuration (all in milliseconds)
# Delay between processing threads (default: 3000ms = 3 seconds)
THREAD_DELAY_MS=1000

# Delay between processing individual messages (default: 1000ms = 1 second)
MESSAGE_DELAY_MS=200

# Delay between API calls to prevent rate limiting (default: 200ms)
API_DELAY_MS=200

# Logging
LOG_LEVEL=info

# Testing Mode (disable queue consumer)
TESTING_MODE=false

# Extraction Queue Processor Configuration
EXTRACTION_QUEUE_ENABLED=true
EXTRACTION_QUEUE_POLL_INTERVAL_MS=15000
EXTRACTION_QUEUE_BATCH_SIZE=10

# Extraction Worker Configuration
EXTRACTION_ENABLED=true
EXTRACTION_POLL_INTERVAL_MS=5000
EXTRACTION_MAX_RETRIES=3
EXTRACTION_TIMEOUT_MS=30000
EXTRACTION_LLM_PROVIDER=openai
EXTRACTION_LLM_MODEL=gpt-4o
EXTRACTION_LLM_TEMPERATURE=0.1

# OpenAI API Key (required if using openai provider)
OPENAI_API_KEY=your-openai-api-key

# Anthropic API Key (optional, required if using anthropic provider)
ANTHROPIC_API_KEY=your-anthropic-api-key

# Spam Detection Configuration
SPAM_DETECTION_ENABLED=true
SPAM_DETECTION_MODEL=gpt-4o-mini
SPAM_DETECTION_BATCH_SIZE=10

# PGMQ Configuration for Extraction
EXTRACTION_PGMQ_ENABLED=true
EXTRACTION_PGMQ_VISIBILITY_TIMEOUT=300
EXTRACTION_PGMQ_BATCH_SIZE=5
